var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},__extends=function(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;n>r;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},__rest=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r},__decorate=function(t,e,r,n){var o,i=arguments.length,a=3>i?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(3>i?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},__param=function(t,e){return function(r,n){e(r,n,t)}},__metadata=function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},__awaiter=function(t,e,r,n){function o(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(r,i){function a(t){try{h(n.next(t))}catch(e){i(e)}}function s(t){try{h(n["throw"](t))}catch(e){i(e)}}function h(t){t.done?r(t.value):o(t.value).then(a,s)}h((n=n.apply(t,e||[])).next())})},__generator=function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,i&&(a=2&r[0]?i["return"]:r[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,i=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){h.label=r[1];break}if(6===r[0]&&h.label<a[1]){h.label=a[1],a=r;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(r);break}a[2]&&h.ops.pop(),h.trys.pop();continue}r=e.call(t,h)}catch(n){r=[6,n],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__exportStar=function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||__createBinding(e,t,r)},__createBinding=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]},__values=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__spreadArrays=function(){for(var t=0,e=0,r=arguments.length;r>e;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;r>e;e++)for(var i=arguments[e],a=0,s=i.length;s>a;a++,o++)n[o]=i[a];return n},__await=function(t){return this instanceof __await?(this.v=t,this):new __await(t)},__asyncGenerator=function(t,e,r){function n(t){u[t]&&(c[t]=function(e){return new Promise(function(r,n){l.push([t,e,r,n])>1||o(t,e)})})}function o(t,e){try{i(u[t](e))}catch(r){h(l[0][3],r)}}function i(t){t.value instanceof __await?Promise.resolve(t.value.v).then(a,s):h(l[0][2],t)}function a(t){o("next",t)}function s(t){o("throw",t)}function h(t,e){t(e),l.shift(),l.length&&o(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,u=r.apply(t,e||[]),l=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},__asyncDelegator=function(t){function e(e,o){r[e]=t[e]?function(r){return(n=!n)?{value:__await(t[e](r)),done:"return"===e}:o?o(r):r}:o}var r,n;return r={},e("next"),e("throw",function(t){throw t}),e("return"),r[Symbol.iterator]=function(){return this},r},__asyncValues=function(t){function e(e){n[e]=t[e]&&function(n){return new Promise(function(o,i){n=t[e](n),r(o,i,n.done,n.value)})}}function r(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=t[Symbol.asyncIterator];return o?o.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__setModuleDefault=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e},__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&__createBinding(e,t,r);return __setModuleDefault(e,t),e},__importDefault=function(t){return t&&t.__esModule?t:{"default":t}},__classPrivateFieldGet=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},__reflect=function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r};!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){r(1),r(2),r(3),r(4),r(5),r(6),r(0),r(7),r(8),r(9),r(10),r(11);var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentGameState=-1,e.nextGameState=0,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.addEventListener(egret.Event.ENTER_FRAME,this.Game,this),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return r.sent(),[4,this.loadTheme()];case 2:return r.sent(),this.stage.removeChild(t),[3,4];case 3:return e=r.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,r){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.Game=function(){if(this.nextGameState!=this.currentGameState){if(-1!=this.currentGameState&&2!=this.nextGameState)for(var t=0;t<this.numChildren;t++)this.removeChildAt(t);switch(this.currentGameState=this.nextGameState,this.currentGameState){case 0:console.log("Start Scene"),this.currentGameScene=new StartScene;break;case 1:console.log("Main Game"),this.currentGameScene=new GameScene;break;case 2:console.log("Finish Game");var e=this.currentGameScene.getScore();this.currentGameScene=new FinishScene(e);break;default:console.log("Error Build Game State !!"),this.currentGameScene=new NoneScene}this.addChild(this.currentGameScene)}else this.currentGameScene.checkState()>=0&&(this.nextGameState=this.currentGameScene.checkState()),1==this.currentGameState&&this.currentGameScene.onestep()},e}(eui.UILayer);window.Main=n,__reflect(n.prototype,"Main",[])},function(t,e){var r=function(){function t(){}return t.prototype.getAsset=function(t,e,r){function n(n){e.call(r,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();window.AssetAdapter=r,__reflect(r.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(t,e){var r=function(t){function e(e,r){var n=t.call(this)||this;n.blockNum=0,n.rotation_angle_number=0,n.rotation_anchor_change=[[30,30],[150,30],[90,90],[90,90],[90,30],[60,60]],n.ID=0,n.currentWidth=n.width,n.currentHeight=n.height,n.blockNum=e;var o=String(e);return n.skinName="resource/eui_skins/block_"+o+".exml",n.rotationBlock(r),n}return __extends(e,t),e.prototype.getBlockNum=function(){return this.blockNum},e.prototype.getAngle=function(){return this.rotation_angle_number},e.prototype.rotationBlock=function(t){switch(this.rotation_angle_number=(this.rotation_angle_number+t)%4,this.anchorOffsetX=this.rotation_anchor_change[this.blockNum][0],this.anchorOffsetY=this.rotation_anchor_change[this.blockNum][1],this.rotation=90*this.rotation_angle_number,this.rotation_angle_number){case 1:this.anchorOffsetX=0,this.anchorOffsetY=this.height,this.currentWidth=this.height,this.currentHeight=this.width;break;case 2:this.anchorOffsetX=this.width,this.anchorOffsetY=this.height,this.currentWidth=this.width,this.currentHeight=this.height;break;case 3:this.anchorOffsetX=this.width,this.anchorOffsetY=0,this.currentWidth=this.height,this.currentHeight=this.width;break;default:this.anchorOffsetX=0,this.anchorOffsetY=0,this.currentWidth=this.width,this.currentHeight=this.height}},e.prototype.moveBlock=function(t,e){this.x=this.x+t,this.y=this.y+e},e}(eui.Component);window.DisplayNextBlock=r,__reflect(r.prototype,"DisplayNextBlock",[])},function(t,e){var r=function(t){function e(e,r){var n=t.call(this)||this;n.rotation_angle_number=0,n.rotation_anchor_change=[[30,30],[150,30],[90,90],[90,90],[90,30],[60,60]],n.ID=2,n.blockNum=e;var o=String(e);return 0==e?n.skinName="resource/eui_skins/filled_block.exml":n.skinName="resource/eui_skins/block_"+o+"_filled.exml",n.rotationBlock(r),n}return __extends(e,t),e.prototype.getBlockNum=function(){return this.blockNum},e.prototype.getAngle=function(){return this.rotation_angle_number},e.prototype.rotationBlock=function(t){switch(this.rotation_angle_number=(this.rotation_angle_number+t)%4,this.anchorOffsetX=this.rotation_anchor_change[this.blockNum][0],this.anchorOffsetY=this.rotation_anchor_change[this.blockNum][1],this.rotation=90*this.rotation_angle_number,this.rotation_angle_number){case 1:this.anchorOffsetX=0,this.anchorOffsetY=this.height,this.currentWidth=this.height,this.currentHeight=this.width;break;case 2:this.anchorOffsetX=this.width,this.anchorOffsetY=this.height,this.currentWidth=this.width,this.currentHeight=this.height;break;case 3:this.anchorOffsetX=this.width,this.anchorOffsetY=0,this.currentWidth=this.height,this.currentHeight=this.width;break;default:this.anchorOffsetX=0,this.anchorOffsetY=0,this.currentWidth=this.width,this.currentHeight=this.height}},e.prototype.moveBlock=function(t,e){this.x=this.x+t,this.y=this.y+e},e}(eui.Component);window.FilledBlock=r,__reflect(r.prototype,"FilledBlock",[])},function(t,e){var r=function(t){function e(e){var r=t.call(this)||this;return r.changeState=-1,r.skinName="resource/eui_skins/finish.exml",r.scoreValue_finish.text=String(e),r.new_game_button.addEventListener(egret.TouchEvent.TOUCH_END,r.endTouchReturn,r),r}return __extends(e,t),e.prototype.checkState=function(){return this.changeState},e.prototype.endTouchReturn=function(t){this.changeState=0},e}(eui.Component);window.FinishScene=r,__reflect(r.prototype,"FinishScene",[])},function(t,e){var r=function(t){function e(){var e=t.call(this)||this;e.changeState=-1,e.rowNum=16,e.colNum=10,e.blockWidth=60,e.pressedButton=0,e.pressMove=[[0,0],[0,0]],e.preMoveFrame=0,e.frameNumber=30,e.maxPreMoveFrame=1*e.frameNumber,e.moveSpeed=.5,e.newSpeed=.3,e.bottomRemoveFlag=!1,e.bottomMoveFlag=!1,e.skinName="resource/eui_skins/game_screen.exml",e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.beginTouch,e),e.addEventListener(egret.TouchEvent.TOUCH_END,e.endTouch,e),e.return_btn.addEventListener(egret.TouchEvent.TOUCH_END,e.endTouchReturn,e),e.score=0,e.currentBlock=new MoveBlock(0,0),e.nextBlock=new DisplayNextBlock(Math.floor(5*Math.random())+1,Math.floor(4*Math.random())),e.newBlockFlag=!0,e.updateScore();var r=new egret.Rectangle(0,0,e.gameArea.width,e.gameArea.height);e.gameArea.mask=r,e.runArea.mask=r;for(var n=0;n<e.colNum;n++){var o=new FilledBlock(0,0);o.moveBlock(n*e.blockWidth,e.gameArea.height),e.gameArea.addChild(o)}return e.next_display.addChild(new DisplayNextBlock(0,0)),e}return __extends(e,t),e.prototype.checkState=function(){return this.changeState},e.prototype.UpdateDisplayNextBlock=function(){this.next_display.removeChildAt(0),this.nextBlock.anchorOffsetX=this.nextBlock.width/2,this.nextBlock.anchorOffsetY=this.nextBlock.height/2,this.nextBlock.x=this.next_display.width/2,this.nextBlock.y=this.next_display.height/2;var t=Math.max(this.nextBlock.width,this.nextBlock.height),e=this.next_display.width/t;this.nextBlock.scaleX=e,this.nextBlock.scaleY=e,this.next_display.addChild(this.nextBlock)},e.prototype.updateScore=function(){this.scoreValue.text=String(this.score)},e.prototype.getScore=function(){return this.score},e.prototype.endTouchReturn=function(t){this.changeState=0},e.prototype.beginTouch=function(t){this.pressMove[0][0]=t.stageX,this.pressMove[0][1]=t.stageY},e.prototype.endTouch=function(t){this.pressMove[1][0]=t.stageX,this.pressMove[1][1]=t.stageY;var e=this.pressMove[1][0]-this.pressMove[0][0],r=this.pressMove[1][1]-this.pressMove[0][1];Math.max(Math.abs(r),Math.abs(e))>50&&(Math.abs(r)>Math.abs(e)?r>0?this.pressedButton=4:this.pressedButton=1:e>0?this.pressedButton=3:this.pressedButton=2)},e.prototype.getKeyBord=function(){return this.pressedButton},e.prototype.cleanKeyBord=function(){this.pressedButton=0},e.prototype.UpdateDisplayRunBlock=function(t,e){this.currentBlock.moveBlock(t,e)},e.prototype.UpdateDisplayRotationBlock=function(){this.rotationBlock(this.currentBlock)},e.prototype.getChildBlockLoc=function(t,e,r,n,o,i,a){var s=this.rotationTransform(r,n,o),h=t-s[0],c=e-s[1];s=this.rotationTransform(i,a,o);var u=h+s[0],l=c+s[1];s=this.rotationTransform(0,this.blockWidth,o);var f=u+s[0],d=l+s[1];s=this.rotationTransform(this.blockWidth,this.blockWidth,o);var m=u+s[0],p=l+s[1];s=this.rotationTransform(this.blockWidth,0,o);var g=u+s[0],_=l+s[1],v=Math.min(u,f,m,g),y=Math.min(l,d,p,_);return[v,y]},e.prototype.rotationBlock=function(t){var e=0,r=t.width/2,n=t.height/2;if(t.getBlockNum()>=1&&t.getBlockNum()<=4){for(var o=Math.pow(10,3),i=0;i<t.numChildren;i++){var a=t.getChildAt(i),s=Math.sqrt(Math.pow(a.x-r,2)+Math.pow(a.y-n,2));o>s&&(o=s,e=i)}var h=t.getChildAt(e),c=this.getChildBlockLoc(t.x,t.y,t.anchorOffsetX,t.anchorOffsetY,t.getAngle(),h.x,h.y);t.rotationBlock(1),h=t.getChildAt(e);var u=this.getChildBlockLoc(t.x,t.y,t.anchorOffsetX,t.anchorOffsetY,t.getAngle(),h.x,h.y);t.moveBlock(c[0]-u[0],c[1]-u[1])}},e.prototype.CheckTouchBottom=function(t){for(var e=!1,r=0;r<t.numChildren;r++)for(var n=t.getChildAt(r),o=this.getChildBlockLoc(t.x,t.y,t.anchorOffsetX,t.anchorOffsetY,t.getAngle(),n.x,n.y),i=0;i<this.gameArea.numChildren;i++)for(var a=this.gameArea.getChildAt(i),s=a.$children,h=0;h<s.length;h++){var c=s[h],u=this.getChildBlockLoc(a.x,a.y,a.anchorOffsetX,a.anchorOffsetY,Math.round(a.rotation/90),c.x,c.y);if(o[0]==u[0]&&o[1]==u[1])return e=!0}return e},e.prototype.CheckBottom=function(){for(var t=[],e=[],r=0;r<this.rowNum;r++)t.push(0),e.push([]);for(var n=0;n<this.gameArea.numChildren;n++){var o=this.gameArea.getChildAt(n),i=o.y/60;i<this.rowNum&&i>=0&&(t[i]+=1,e[i].push(n))}for(var a=[],r=0;r<this.rowNum;r++)t[r]>=this.colNum&&a.push(r);return a},e.prototype.removeBottom=function(t){for(var e=0;e<t.length;e++)for(var r=0;r<this.gameArea.numChildren;){var n=this.gameArea.getChildAt(r);n.y==t[e]*this.blockWidth?this.gameArea.removeChild(n):r++}},e.prototype.moveBottom=function(t){for(var e=0;e<t.length;e++)for(var r=0;r<this.gameArea.numChildren;){var n=this.gameArea.getChildAt(r);n.y<t[e]*this.blockWidth&&(n.y+=this.blockWidth),r++}},e.prototype.CheckLeftBound=function(t){for(var e=!1,r=0;r<t.numChildren;r++){var n=t.getChildAt(r),o=this.getChildBlockLoc(t.x,t.y,t.anchorOffsetX,t.anchorOffsetY,t.getAngle(),n.x,n.y);if(o[0]<0)return e=!0}return e},e.prototype.CheckRightBound=function(t){for(var e=!1,r=0;r<t.numChildren;r++){var n=t.getChildAt(r),o=this.getChildBlockLoc(t.x,t.y,t.anchorOffsetX,t.anchorOffsetY,t.getAngle(),n.x,n.y);if(o[0]+this.blockWidth>this.gameArea.width)return e=!0}return e},e.prototype.rotationTransform=function(t,e,r){return[Math.round(t*Math.cos(r*Math.PI/2)-e*Math.sin(r*Math.PI/2)),Math.round(t*Math.sin(r*Math.PI/2)+e*Math.cos(r*Math.PI/2))]},e.prototype.onestep=function(){this.updateScore();var t=this.getKeyBord();if(this.newBlockFlag)this.bottomRemoveFlag||this.bottomMoveFlag||(this.deletRow=this.CheckBottom()),0!=this.deletRow.length||this.bottomRemoveFlag||this.bottomMoveFlag?(this.bottomRemoveFlag?(this.bottomRemoveFlag=!1,this.removeBottom(this.deletRow)):this.bottomMoveFlag?(this.bottomMoveFlag=!1,this.moveBottom(this.deletRow)):0!=this.deletRow.length&&(this.bottomRemoveFlag=!0,this.bottomMoveFlag=!0,this.score+=Math.pow(2,this.deletRow.length)),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.newSpeed):(this.currentBlock=new MoveBlock(this.nextBlock.getBlockNum(),this.nextBlock.getAngle()),this.nextBlock=new DisplayNextBlock(Math.floor(5*Math.random())+1,Math.floor(4*Math.random())),this.newBlockFlag=!1,this.runArea.addChildAt(this.currentBlock,0),this.UpdateDisplayRunBlock(Math.floor((5*this.blockWidth-this.currentBlock.currentWidth/2)/this.blockWidth)*this.blockWidth,-this.currentBlock.currentHeight),this.CheckTouchBottom(this.currentBlock)?this.changeState=2:this.UpdateDisplayNextBlock(),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed);else if(this.preMoveFrame>this.maxPreMoveFrame||0!=t)if(1==t){var e=new MoveBlock(this.currentBlock.getBlockNum(),this.currentBlock.getAngle());e.moveBlock(this.currentBlock.x-0,this.currentBlock.y+0),this.rotationBlock(e),this.CheckLeftBound(e)||this.CheckTouchBottom(e)||this.CheckRightBound(e)?(this.UpdateDisplayRunBlock(0,0),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed):(this.UpdateDisplayRotationBlock(),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed)}else if(2==t){var e=new MoveBlock(this.currentBlock.getBlockNum(),this.currentBlock.getAngle());e.moveBlock(this.currentBlock.x-this.blockWidth,this.currentBlock.y+0),this.CheckLeftBound(e)||this.CheckTouchBottom(e)?(this.UpdateDisplayRunBlock(0,0),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed):(this.UpdateDisplayRunBlock(-this.blockWidth,0),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed)}else if(3==t){var e=new MoveBlock(this.currentBlock.getBlockNum(),this.currentBlock.getAngle());e.moveBlock(this.currentBlock.x+this.blockWidth,this.currentBlock.y+0),this.CheckRightBound(e)||this.CheckTouchBottom(e)?(this.UpdateDisplayRunBlock(0,0),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed):(this.UpdateDisplayRunBlock(this.blockWidth,0),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed)}else if(4==t){var e=new MoveBlock(this.currentBlock.getBlockNum(),this.currentBlock.getAngle());e.moveBlock(this.currentBlock.x+0,this.currentBlock.y+0);for(var r=0;!this.CheckTouchBottom(e);)e.moveBlock(0,this.blockWidth),r+=this.blockWidth;this.UpdateDisplayRunBlock(0,r-this.blockWidth),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed}else if(0==t){var e=new MoveBlock(this.currentBlock.getBlockNum(),this.currentBlock.getAngle());if(e.moveBlock(this.currentBlock.x+0,this.currentBlock.y+this.blockWidth),this.CheckTouchBottom(e)){this.runArea.removeChildAt(0);for(var n=0;n<this.currentBlock.numChildren;n++){var o=this.currentBlock.getChildAt(n),i=this.getChildBlockLoc(this.currentBlock.x,this.currentBlock.y,this.currentBlock.anchorOffsetX,this.currentBlock.anchorOffsetY,this.currentBlock.getAngle(),o.x,o.y),a=new FilledBlock(0,0);a.moveBlock(i[0],i[1]),this.gameArea.addChild(a)}this.newBlockFlag=!0,this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.newSpeed}else this.UpdateDisplayRunBlock(0,this.blockWidth),this.preMoveFrame=0,this.maxPreMoveFrame=this.frameNumber*this.moveSpeed}this.cleanKeyBord(),this.preMoveFrame++},e}(eui.Component);window.GameScene=r,__reflect(r.prototype,"GameScene",[])},function(t,e){var r=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);window.LoadingUI=r,__reflect(r.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(t,e){var r=function(t){function e(e,r){var n=t.call(this)||this;n.blockNum=0,n.rotation_angle_number=0,n.rotation_anchor_change=[[30,30],[150,30],[90,90],[90,90],[90,30],[60,60]],n.ID=1,n.currentWidth=n.width,n.currentHeight=n.height,n.blockNum=e;var o=String(e);return n.skinName="resource/eui_skins/block_"+o+".exml",n.rotationBlock(r),n}return __extends(e,t),e.prototype.getBlockNum=function(){return this.blockNum},e.prototype.getAngle=function(){return this.rotation_angle_number},e.prototype.rotationBlock=function(t){switch(this.rotation_angle_number=(this.rotation_angle_number+t)%4,this.anchorOffsetX=this.rotation_anchor_change[this.blockNum][0],this.anchorOffsetY=this.rotation_anchor_change[this.blockNum][1],this.rotation=90*this.rotation_angle_number,this.rotation_angle_number){case 1:this.anchorOffsetX=0,this.anchorOffsetY=this.height,this.currentWidth=this.height,this.currentHeight=this.width;break;case 2:this.anchorOffsetX=this.width,this.anchorOffsetY=this.height,this.currentWidth=this.width,this.currentHeight=this.height;break;case 3:this.anchorOffsetX=this.width,this.anchorOffsetY=0,this.currentWidth=this.height,this.currentHeight=this.width;break;default:this.anchorOffsetX=0,this.anchorOffsetY=0,this.currentWidth=this.width,this.currentHeight=this.height}},e.prototype.moveBlock=function(t,e){this.x=this.x+t,this.y=this.y+e},e}(eui.Component);window.MoveBlock=r,__reflect(r.prototype,"MoveBlock",[])},function(t,e){var r=function(t){function e(){var e=t.call(this)||this;return e.changeState=-1,e.skinName="resource/eui_skins/none_screen.exml",e}return __extends(e,t),e.prototype.checkState=function(){return this.changeState},e}(eui.Component);window.NoneScene=r,__reflect(r.prototype,"NoneScene",[])},function(t,e){var r=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();window.DebugPlatform=r,__reflect(r.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new r)},function(t,e){var r=function(t){function e(){var e=t.call(this)||this;return e.changeState=-1,e.skinName="resource/eui_skins/start_screen.exml",e.start_button.addEventListener(egret.TouchEvent.TOUCH_TAP,e.btnTouchHandler,e),e}return __extends(e,t),e.prototype.btnTouchHandler=function(t){this.changeState=1},e.prototype.checkState=function(){return this.changeState},e}(eui.Component);window.StartScene=r,__reflect(r.prototype,"StartScene",[])},function(t,e){var r=function(){function t(){}return t.prototype.getTheme=function(t,e,r,n){function o(t){e.call(n,t)}function i(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),r.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,r){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.replace(".exml","_EUI.json");generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(s,function(r){window.JSONParseClass.setData(r),egret.callLater(function(){e.call(n,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();window.ThemeAdapter=r,__reflect(r.prototype,"ThemeAdapter",["eui.IThemeAdapter"])}]);